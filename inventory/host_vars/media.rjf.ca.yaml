---
ansible_user: bfowler
ansible_become_pass: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    32306161303034343263383034656562636563373336643632646233363036366236363165323661
    6631623231346364313762343064663131663034353763300a613231336339353533353234376465
    30363839653632653162313365613136663366323538306334376133623431653237623964323162
    3238626133306361660a663430303230393266326265383836393731366130646535313238636235
    6661
ansible_email: bob@rjf.ca

admin_users:
    - bob@rjf.ca

share_users:
    - karley@rjf.ca
    - rcf@rjf.ca
    - bj@rjf.ca
    - mary@rfox.ca
    - rick@rfox.ca
    - sean.vedell@gmail.com

web_user: bfowler
web_password: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    32636461373233643633396538326130626563363766373934333563323935333239343636313635
    3836343333343434363663393764643364346536333964320a383533633733666663666265663034
    35663861316366346630353137336163326230346666353431383537393365653463353637396137
    6561343866636433360a316434346364363234356661626534323534616164663531313635323133
    3964

google_oauth2_client_id: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    30303062333335353132323966333261653136396235363466306532663338663830363233353364
    6336613464613566613134393439663534383738646263620a313737393730363334303435616562
    66646139393035303030313766616239386630666237313831323636613162343564626166336361
    6332643862353233380a396436653934323736633836346234656431356366306530383836323765
    37353033623334353862323266303061653635303239616139323838666234656336643835633133
    30613139396661613136346235376532333164636537646232616663356438656432363133356138
    35646635303431373639386365396561376261366262633866333666393533343831326463393133
    62313466396565386466

google_oauth2_client_secret: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    66633862636332356662316365396237376133386561656266306234303630313865303130383735
    3933346332363461653634346365613034353062303763310a653730396265346561643663393562
    36346330386631343938316536623035613133396432633463353430663832306165623537626438
    6530383932303539390a386136626334366362383366346639336634363762333530653839653935
    35303633333839343364666363636237326437663838356264323630376436666563

gmail_access_key: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    36343535336261666131393761633731623966663233326466643837663032353165663736393638
    6466383834323962303235356137666461363536663566660a313432356364323539303432333163
    35373363363465346135363665366638666131663764333131366664633931653838663535376531
    6437643737316166340a346637333031383364316661303436396539396633336237353931373834
    33633230646530613462653936633864356631363432333331363162303564623866

# Useful paths
data_folder: /mnt/Tank
app_folder: "{{ data_folder }}/app"
media_folder: "{{ data_folder }}/Media"
backup_folder: "{{ data_folder }}/backup"
download_folder: "{{ data_folder }}/downloads"
share_folder: "{{ media_folder }}"
movies_folder: "{{ media_folder }}/Movies"
tv_folder: "{{ media_folder }}/TV"

nfs_host: 10.0.0.5
nfs_mounts:
    - mount: "{{ data_folder }}"
        url: "{{ nfs_host }}:{{ data_folder }}"

nordvpn_username: bob@rjf.ca
nordvpn_password: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    32303264643461346532373361396665333462383762373733663466353830663635633262623364
    3063356539303666623535313735643563386330653631630a396232306231613139633861313664
    31663763623430303831626565306164616436613239303836646339316532653862653566656131
    6262383265613266360a383831303038646535643061333031363138663235356165393934623733
    33646434343038363731343633346239356638356135663366383266393763396634

docker_compose:
  services:
    plex:
        volumes:
            - "{{ app_folder }}/plex:/config"
            - "{{ media_folder }}:/mnt/storage/share:ro"
    transmission:
        image: haugene/transmission-openvpn:latest
        cap_add:
            - NET_ADMIN
        networks:
            - apps
        volumes:
            - "{{ app_folder }}/transmission/config:/config"
            - "{{ app_folder }}/transmission/home:/data/transmission-home"
            - "{{ download_folder }}:/downloads"
        environment:
            - "PUID={{ uid }}"
            - "PGID={{ gid }}"
            - "TZ=America/Toronto"
            - "WEBPROXY_ENABLED=false"
            - "LOCAL_NETWORK=172.26.0.0/16"
            - "OPENVPN_PROVIDER=NORDVPN"
            - "OPENVPN_CONFIG=CA\ Toronto"
            - "OPENVPN_USERNAME={{ nordvpn_username }}"
            - "OPENVPN_PASSWORD={{ nordvpn_password }}"
            - "CREATE_TUN_DEVICE=true"
            - "TRANSMISSION_INCOMPLETE_DIR_ENABLED=false"
            - "TRANSMISSION_WATCH_DIR=/downloads/watch"
            - "TRANSMISSION_DOWNLOAD_DIR=/downloads"
            - "TRANSMISSION_SCRIPT_TORRENT_DONE_ENABLED=true"
            - "TRANSMISSION_SCRIPT_TORRENT_DONE_FILENAME=/config/unpack.sh"
    jellyfin:
        image: linuxserver/jellyfin
        container_name: jellyfin
        networks:
            - apps
        ports:
            - 8096:8096
        environment:
            - "PLEX_UID={{ uid }}"
            - "PLEX_GID={{ gid }}"
            - "TZ=America/Toronto"
        volumes:
            - "{{ app_folder }}/jellyfin:/config"
            - "{{ media_folder }}:/data:ro"
        restart: "no"

caddy:
    endpoints:
        jellyfin:
            type: proxy
            auth: null
            path: /jellyfin
            host: jellyfin
            port: 8096
            users: "{{ admin_users }}"
