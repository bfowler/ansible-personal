
admin_users: []
share_users: []

# Basic auth configuration
web_user: bfowler
web_password: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    38333637613331613736353934313961323237396235366130306631353039306536316430636432
    3730636233303065306364633335393564656431306536610a363165393839303234383731333064
    66303933666232363265383138666139323537376463633766303939656631323563386236366639
    3162303061323732320a396337623561303038636366373239393634653863656531633630306661
    6234

google_oauth2_client_id: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    64353165613334613366633031323264316238373132313462313137343665323765316561656536
    3438383532636562373264386330303239306164666337610a353430356431393432643633303033
    34616338383364643530303532316638326634393433643937626337613965303534306237393339
    3666623863653837620a346566633565616362663133363234336638393032663837343732653533
    3238


google_oauth2_client_secret: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    65623262306236306133646237303731343764326565656363313965643133386431363535306163
    3838356430316664313765396334376530323962333961370a306663376135663632346462363465
    39663032613361383565626231363236323836646431643434323632333366306630333832343536
    3564383831386666630a313461666666613164663762343638393237396132666531633364346565
    3833

docker_compose:
    services:
        caddy:
        build:
            args:
            plugins: login,jwt
            context: github.com/abiosoft/caddy-docker.git
        container_name: caddy
        networks:
            - apps
        ports:
            - 80:80
            - 443:443
        restart: "no"
        volumes:
            - /etc/docker/Caddyfile:/etc/Caddyfile:ro
            - "{{ app_folder }}/caddy:/root/.caddy"
            - "{{ app_folder }}/caddy/log:/log"
            - "{{ share_folder }}:/srv/share:ro"

caddy:
    endpoints:
        share:
            type: share
            auth: oauth
            path: /share
            users: "{{ admin_users + share_users | default([]) }}"
    remotes: {}
